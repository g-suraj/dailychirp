<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.ico"><meta name="generator" content="Astro v4.4.0"><title>Daily Chirp</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"><style>.styled-link{text-decoration:underline}.button[disabled]{opacity:1}.image-container,.credits-details-container,.audio-container,.result{padding:0}.credits-details-container{font-size:10px}.audio-container,.result{padding-top:5px}.result{padding:0 10px}.bird-image{box-shadow:#00000059 0 5px 15px}@media (min-width: 900px){.bird-image,.bird-audio{width:500px}.buttons-container{width:50%;margin:0 auto}.button-div{padding:5px}}@media (min-width: 300px) and (max-width: 900px){.bird-audio,.guess-button,.buttons-container,.bird-image{width:100%}.button-div{width:50%;float:left;padding:0 5px}}
</style><script type="module">const b=new Date().toDateString(),u=document.querySelector(".result"),l=document.querySelector(".bird-image"),w=document.querySelector(".bird-audio"),v=document.querySelector(".buttons-container"),m=document.querySelector(".credits-details-container");async function L(d,t){const s=new TextEncoder().encode(d),r=await crypto.subtle.digest("SHA-256",s);return Array.from(new Uint8Array(r)).reduce((e,o)=>e*o)%t}async function T(d,t){const s=await L(d,t);console.log(s);let r=[];for(let e=0;e<3;++e)r.push((s+e+1)%t);const n=Math.floor(Math.random()*4);return r.splice(n,0,s),{todaysIndex:s,guesses:r}}window.addEventListener("load",async()=>{const t=await(await fetch("https://g-suraj.github.io/xeno-canto-processed/pickled_data.json")).json(),s=t.length,r=new Date().toDateString(),{todaysIndex:n,guesses:e}=await T(r,s),o=t[n],A=e[0]%o._occurrences.length,S=e[1]%o._pictures.length,h=o._occurrences[A],p=o._pictures[S];m&&(m.innerHTML+=`Audio recording is courtesy of ${h.__rightsHolder}.`),l?.setAttribute("src",p),l?.removeAttribute("hidden"),w?.setAttribute("src",h.__birdsong);const y=b in localStorage;e.forEach(a=>{let c=document.createElement("div");c.className="button-div",c.innerHTML+=`
          <button 
              class="button guess-button"
              value="${a===n?"yes":"no"}|${a}">${t[a].vernacularName}
          </button>
        `,c.addEventListener("click",()=>{localStorage.setItem(b,`${a}`),g(),l?.setAttribute("style","")}),v?.appendChild(c)}),y&&g(),l?.setAttribute("style",y?"":"filter: blur(15px)");function g(){const a=localStorage.getItem(b)||"",c=document.querySelectorAll(".guess-button");let f=!0;c?.forEach(i=>{i.getAttribute("value")?.startsWith("yes")&&i.classList.add("is-success"),i.getAttribute("value")===`no|${a}`&&(i.classList.add("is-danger"),f=!1),i.setAttribute("disabled","")}),u&&(f?u.innerHTML+="<b>That's right</b>!":u.innerHTML+="<b>Tough luck!</b>",u.innerHTML+=`<br>What you hear is a "${t[n].vernacularName}"<br>(<i>${t[n].scientificName}</i>)`,u.innerHTML+="<br><br><a class='styled-link' href='https://www.gbif.org/uk/species/2475532'>Click here</a> for more about this bird.")}});
</script></head> <nav class="navbar has-shadow" role="navigation"> <div class="navbar-brand"> <a class="navbar-item" href="https://g-suraj.github.io"> <div class="title is-5">Daily Chirp</div> </a> <a class="navbar-item" href="https://github.com/g-suraj/dailychirp"> <div>source</div> </a> <a class="navbar-item" href="https://g-suraj.github.io/"> <div>about me</div> </a> </div> </nav>  <body> <div class="loaded"> <div class="columns is-centered is-multiline is-mobile"> <div class="column is-full has-text-centered"> <div class="title is-4" style="margin-top: 10px;">
Guess the Birdsong ðŸŽ¶
</div> </div> <div class="column is-full has-text-centered image-container"> <img class="bird-image" alt="A bird." hidden> </div> <div class="column is-full has-text-centered credits-details-container"></div> <div class="column is-full has-text-centered audio-container"> <audio controls class="bird-audio"></audio> </div> <div class="column has-text-centered"> <div class="buttons buttons-container"></div> </div> <div class="column is-full has-text-centered result"></div> </div> </div> </body></html>