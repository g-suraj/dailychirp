<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" type="image/svg+xml" href="/favicon.ico"><meta name="generator" content="Astro v4.4.0"><title>Daily Chirp</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"><style>.styled-link{text-decoration:underline}.button[disabled]{opacity:1}.image-container,.credits-details-container,.audio-container,.result{padding:0}.credits-details-container{font-size:10px}.audio-container,.result{margin-top:5px}.result{padding:0 10px}.bird-image{box-shadow:#00000059 0 5px 15px}@media (min-width: 900px){.bird-image,.bird-audio{width:500px}.buttons-container{width:50%;margin:0 auto}.button-div{padding:5px}.audiowrapper{height:inherit;width:30%;margin:0 auto}}@media (min-width: 300px) and (max-width: 900px){.bird-audio,.guess-button,.buttons-container,.bird-image{width:100%}.button-div{width:50%;float:left;padding:0 5px}.audiowrapper{height:inherit;width:100%;margin:0 auto}}.play,.refresh{height:inherit;width:50%;float:left}.audio-container{height:8vh}
</style><script type="module">const f=new Date().toDateString(),l=document.querySelector(".result"),y=document.querySelector(".bird-image"),_=document.querySelector(".play"),L=document.querySelector(".refresh"),v=document.querySelector(".buttons-container"),b=document.querySelector(".credits-details-container");async function M(i,t){const e=new TextEncoder().encode(i),s=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(s)).reduce((r,u)=>r*u)%t}async function T(i,t){const e=await M(i,t);console.log(e);let s=[];for(let r=0;r<3;++r)s.push((e+r+1)%t);const h=Math.floor(Math.random()*4);return s.splice(h,0,e),{todaysIndex:e,guesses:s}}window.addEventListener("load",async()=>{const i=await fetch("https://g-suraj.github.io/xeno-canto-processed/pickled_data.json");let t=null;const e=await i.json(),s=e.length,h=new Date().toDateString(),{todaysIndex:r,guesses:u}=await T(h,s),n=e[r],w=u[1]%n._pictures.length,S=n._pictures[w];let g=u[0]%n._occurrences.length,o=n._occurrences[g];b&&(b.innerHTML=`Audio recording is courtesy of ${o.__rightsHolder}.`),y?.setAttribute("src",S),y?.removeAttribute("hidden"),L?.addEventListener("click",()=>{t?.pause(),g=Math.floor(Math.random()*n._occurrences.length),o=n._occurrences[g],t=new Audio(o.__birdsong),t?.play(),b&&(b.innerHTML=`Audio recording is courtesy of ${o.__rightsHolder}.`)}),_?.addEventListener("click",()=>{t=new Audio(o.__birdsong),t.play()});const m=f in localStorage;u.forEach(c=>{let a=document.createElement("div");a.className="button-div",a.innerHTML+=`
          <button 
              class="button guess-button"
              value="${c===r?"yes":"no"}|${c}">${e[c].vernacularName}
          </button>
        `,a.addEventListener("click",()=>{localStorage.setItem(f,`${c}`),p(),y?.setAttribute("style","")}),v?.appendChild(a)}),m&&p(),y?.setAttribute("style",m?"":"filter: blur(15px)");function p(){const c=localStorage.getItem(f)||"",a=document.querySelectorAll(".guess-button");let A=!0;a?.forEach(d=>{d.getAttribute("value")?.startsWith("yes")&&d.classList.add("is-success"),d.getAttribute("value")===`no|${c}`&&(d.classList.add("is-danger"),A=!1),d.setAttribute("disabled","")}),l&&(A?l.innerHTML+="<b>That's right</b>!":l.innerHTML+="<b>Tough luck!</b>",l.innerHTML+=`<br>What you hear is a "${e[r].vernacularName}"<br>(<i>${e[r].scientificName}</i>)`,l.innerHTML+=`<br><br><a class='styled-link' href='https://www.gbif.org/species/${o.speciesKey}'>Click here</a> for more about this bird.`)}});
</script></head> <nav class="navbar has-shadow" role="navigation"> <div class="navbar-brand"> <a class="navbar-item" href="https://g-suraj.github.io"> <div class="title is-5">Daily Chirp</div> </a> <a class="navbar-item" href="https://github.com/g-suraj/dailychirp"> <div>source</div> </a> <a class="navbar-item" href="https://g-suraj.github.io/"> <div>about me</div> </a> </div> </nav>  <body> <div class="loaded"> <div class="columns is-centered is-multiline is-mobile"> <div class="column is-full has-text-centered"> <div class="title is-4" style="margin-top: 10px;">
Guess the Birdsong ðŸŽ¶
</div> </div> <div class="column is-full has-text-centered image-container"> <img class="bird-image" alt="A bird." hidden> </div> <div class="column is-full has-text-centered credits-details-container"></div> <div class="column is-full has-text-centered audio-container"> <div class="audiowrapper"> <div class="play"> <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24"><path fill="currentColor" d="M8 5.14v14l11-7z"></path></svg> </div> <div class="refresh"> <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="100%" height="100%"><path fill="currentColor" d="M12 20q-3.35 0-5.675-2.325T4 12q0-3.35 2.325-5.675T12 4q1.725 0 3.3.712T18 6.75V4h2v7h-7V9h4.2q-.8-1.4-2.187-2.2T12 6Q9.5 6 7.75 7.75T6 12q0 2.5 1.75 4.25T12 18q1.925 0 3.475-1.1T17.65 14h2.1q-.7 2.65-2.85 4.325T12 20"></path></svg> </div> </div> </div> <div class="column has-text-centered"> <div class="is-centered buttons buttons-container"></div> </div> <div class="column is-full has-text-centered result"></div> </div> </div> </body></html>